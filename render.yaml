services:
  - type: web
    name: gustav-llm-assistant
    runtime: python
    buildCommand: |
      pip install -r requirements.txt
      cd backend && pip install -r requirements.txt
    startCommand: cd backend && python app/main.py
    envVars:
      - key: PYTHON_VERSION
        value: 3.11
      - key: PORT
        value: 8002
      - key: DEMO
        sync: false
      - key: QDRANT_PATH
        value: /var/data/local_qdrant_db
      - key: QDRANT_COLLECTION
        value: documents
      - key: QDRANT_FORCE_RECREATE
        value: false
      - key: EMBEDDING_PROVIDER
        sync: false
      - key: EMBEDDING_DIM
        sync: false
      - key: EMBEDDING_TIMEOUT
        value: 10
      - key: AZURE_OPENAI_API_KEY
        sync: false
      - key: AZURE_OPENAI_ENDPOINT
        sync: false
      - key: AZURE_OPENAI_API_VERSION
        value: 2024-02-15-preview
      - key: AZURE_DEPLOYMENT_CHAT
        sync: false
      - key: AZURE_DEPLOYMENT_EMBED
        sync: false
      - key: ADMIN_TOKEN
        sync: false
    disk:
      name: qdrant-storage
      mountPath: /var/data
      sizeGB: 1
